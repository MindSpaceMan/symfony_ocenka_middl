{% extends 'base.html.twig' %}

{% block title %}Войти{% endblock %}

{% block body %}
    <style>
        .auth-wrap{min-height:70vh;display:flex;align-items:center;justify-content:center;padding:24px}
        .auth-card{width:100%;max-width:420px;background:#fff;border:1px solid #e7e7e7;border-radius:14px;
            box-shadow:0 10px 30px rgba(0,0,0,.06);padding:22px}
        .auth-title{margin:0 0 14px;font-size:22px}
        .auth-sub{margin:0 0 18px;color:#666;font-size:14px}
        .auth-row{margin-bottom:12px}
        .auth-label{display:block;margin:0 0 6px;font-size:13px;color:#333}
        .auth-input{width:100%;padding:10px 12px;border:1px solid #d9d9d9;border-radius:10px;outline:none}
        .auth-input:focus{border-color:#7aa7ff;box-shadow:0 0 0 4px rgba(122,167,255,.15)}
        .auth-btn{width:100%;padding:10px 12px;border:0;border-radius:10px;background:#2f6feb;color:#fff;
            font-weight:600;cursor:pointer}
        .auth-btn:hover{filter:brightness(.97)}
        .auth-foot{margin-top:14px;font-size:13px;color:#444}
        .auth-foot a{color:#2f6feb;text-decoration:none}
        .auth-foot a:hover{text-decoration:underline}
        .auth-alert{padding:10px 12px;border-radius:10px;margin-bottom:12px}
        .auth-alert--danger{background:#fff1f1;border:1px solid #ffd1d1;color:#8a1f1f}
        .auth-alert--info{background:#f3f7ff;border:1px solid #d7e6ff;color:#1b3a7a}
    </style>

    <div class="auth-wrap">
        <div class="auth-card">
            {% if error %}
                <div class="auth-alert auth-alert--danger">
                    {{ error.messageKey|trans(error.messageData, 'security') }}
                </div>
            {% endif %}

            {% if app.user %}
                <div class="auth-alert auth-alert--info">
                    Вы зашли как <b>{{ app.user.userIdentifier }}</b>,
                    <a href="{{ logout_path() }}">выйти</a>
                </div>
            {% endif %}

            <h1 class="auth-title">Вход</h1>
            <p class="auth-sub">Введите почту и пароль, чтобы продолжить.</p>

            <form method="post">
                <div class="auth-row">
                    <label class="auth-label" for="inputEmail">Почта</label>
                    <input
                        class="auth-input"
                        type="email"
                        value="{{ last_username }}"
                        name="email"
                        id="inputEmail"
                        autocomplete="email"
                        required
                        autofocus
                    >
                </div>

                <div class="auth-row">
                    <label class="auth-label" for="inputPassword">Пароль</label>
                    <input
                        class="auth-input"
                        type="password"
                        name="password"
                        id="inputPassword"
                        autocomplete="current-password"
                        required
                    >
                </div>

                <input type="hidden" name="_csrf_token" data-controller="csrf-protection" value="{{ csrf_token('authenticate') }}">

                <button class="auth-btn" type="submit">Войти</button>

                <div class="auth-foot">
                    Нет аккаунта? <a href="{{ path('app_register') }}">Зарегистрироваться</a>
                </div>
            </form>
        </div>
    </div>
{% endblock %}
